<!DOCTYPE html>
<html>
<head>
  <title>Google Maps Autocomplete</title>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key={{GOOGLE_KEY}}&libraries=places&callback=initMap&loding=async"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"/>
</head>
<body>
    <h1>Location Search with Autocomplete</h1>
    <input id="autocomplete" type="text" placeholder="Enter a location">
    <div id="map"></div>

    <script>
        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -34.397, lng: 150.644 }, // Default center (Sydney, Australia)
                zoom: 8
            });

            const input = document.getElementById('autocomplete');
            const autocomplete = new google.maps.places.PlaceAutocompleteElement(input);

            // Bind the Autocomplete to the map's bounds for better relevance
            autocomplete.bindTo('bounds', map);

            // Set up event listener for when a place is selected
            autocomplete.addListener('place_changed', () => {
                const place = autocomplete.getPlace();

                if (!place.geometry || !place.geometry.location) {
                    // User entered the name of a Place that was not suggested and pressed the Enter key,
                    // or the Place Details request failed.
                    window.alert("No details available for input: '" + place.name + "'");
                    return;
                }

                // If the place has a geometry, then present it on a map.
                if (place.geometry.viewport) {
                    map.fitBounds(place.geometry.viewport);
                } else {
                    map.setCenter(place.geometry.location);
                    map.setZoom(17); // Why 17? Because it looks good.
                }

                // Add a marker for the selected place
                new google.maps.Marker({
                    map: map,
                    position: place.geometry.location
                });
            });
        }
    </script>
</body>
</html>